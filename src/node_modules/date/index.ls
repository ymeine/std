require! {
# -------------------------------------------------------------------------- 3rd
	moment
# ---------------------------------------------------------------------- Package
	'packager'
}



format = 'D-M-YYYY H:m:s.SSS Z'


_export = (.format format)

_import = (spec) ->
	{
		input
		format
		lang
		utc
	} = spec

	utc ?= no

	# Processing ---------------------------------------------------------------

	# ------------------------------------------------------- Backup & configure

	if lang?
		lang_backup = moment.lang!
		moment.lang lang

	# ------------------------------------------------------------------- Import

	result = if utc
		moment.utc input, format
	else
		moment input, format

	# ------------------------------------------------------------------ Restore

	if lang_backup?
		moment.lang lang_backup

	# Return -------------------------------------------------------------------

	result

convert = -> _import ... |> _export





packager.export {
	module

	values: [
		{
			value: format
			names: <[
				format
				fmt
			]>
		}
		{
			value: _export
			names: <[
				export
				exp
			]>
		}
		{
			value: _import
			names: <[
				import
				imp
			]>
		}
		{
			value: convert
			names: <[
				convert
			]>
		}
	]
}
